package com.projektledelse.util;

import java.io.File;
import java.io.FileInputStream;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.projektledelse.dao.UserDao;
import com.projektledelse.model.User;

@Service("AvatarToByteService")
@Transactional
public class AvatarImageToByte{
	
	@Autowired
	private UserDao dao;
	
	public void saveImage(){
	
		
		//save image into database
		File file = new File("C:\\mavan-hibernate-image-mysql.png");
	    byte[] bFile = new byte[(int) file.length()];
	    
	    try {
	     FileInputStream fileInputStream = new FileInputStream(file);
	     //convert file into array of bytes
	     fileInputStream.read(bFile);
	     fileInputStream.close();
	    } catch (Exception e) {
	     e.printStackTrace();
	    }
	    
	    User avatar = new User();
	    
	    avatar = dao.findBySSO("renan");
	    
        avatar.setImage(bFile);
        
        dao.save(avatar);
        
		
	} //Fim do m√©todo saveImage
	
	
}